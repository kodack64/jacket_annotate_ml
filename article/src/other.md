# その他のAPIの補遺

---

幾つかのAPIは使用時に少しトラブったので、ログとして残しておこうと思います。

### Gracenote Web API
GracenoteはAPIキーに対してユーザIDを発行し、ユーザIDと合わせて問い合わせます。
この時、ユーザIDが有効になるのは発行してから5分程度立ってからのようです。それまではHello error [130]という意味不明なエラーが出ます。

Gracenoteの規制は数百から数千でAPI依存という話でしたが、曲の取得と画像の取得を一日で3000ずつ投げても特にrate limitに到達することはなかったので意外とゆるいかもしれません。

### Discogs API
Discogsはダンプファイルを配布していますが、DLに死ぬほど時間がかかる上、DBに突っ込むのにも死ぬほど時間がかかります。規模にもよりますが、直接APIを叩いたほうが現実的ではないかなと思います。一応[discogs-xml2db](https://github.com/philipmat/discogs-xml2db)というSQLにダンプファイルを落とし込むツールがありますが、無茶苦茶時間かかる割に今回の用途には微妙な感じでした。

### Amazon Product Advertising API
とにかく怖いのがAPIキー流出からのクラウド破産です。ルートアカウントのアクセスキーはamazon AWSのコンソールから無効にしたり削除したり出来るので、一通り使用が終わったら削除しておくと安心かと思います。俺はgit外のフォルダに纏めてAPIキーを置いて読みに行っていましたが、その他安全に運用する方法として環境変数に設定するなどの対策があるようです。

### Google Cloud Vision API
Amazonと同じくクレカの登録を強制されます。従ってAPIキーが流出すると異常な請求が来る可能性があります。ただし、amazonはルートアカウントキーが流出するとインスタンス立てまくってビットコインを掘るなどされる一方、こちらは特定のAPIだけにしか使えないので盗んでもあまり旨味がない分安全かもしれません。不安なら終わったらキーを再生成するか削除して起きましょう。
